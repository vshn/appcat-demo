apiVersion: vshn.appcat.vshn.io/v1
kind: VSHNPostgreSQL
metadata:
  name: my-vaultwarden-postgres-r
  namespace: my-vaultwarden
spec:
  restore:
    claimName: my-vaultwarden-postgres
    backupName: my-vaultwarden-postgres-75mdd-2024-05-19-11-41-00
  parameters:
    backup:
      deletionProtection: true
      deletionRetention: 7
      retention: 6
      schedule: "* * * * *"
    instances: 1
    maintenance:
      dayOfWeek: tuesday
      timeOfDay: "23:00:00"
    network:
      ipFilter:
        - 0.0.0.0/0
      serviceType: ClusterIP
    service:
      majorVersion: "15"
      pgSettings:
        timezone: Europe/Zurich
      serviceLevel: besteffort
    updateStrategy:
      type: Immediate
  writeConnectionSecretToRef:
    name: postgres-creds-r
  compositionRef:
    name: vshnpostgresrestore.vshn.appcat.vshn.io
